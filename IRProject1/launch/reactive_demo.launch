<launch>
  <!-- Using Gazebo simulated time-->
  <param name="use_sim_time" value="true"/>

  <!-- Include our world file with robot-->
  <include file="$(find IRProject1)/launch/roomandhallway.launch"/>

  <!-- This node takes keyboard pressed and translates them into robot movement using teleop and cmd_vel -->
  <node pkg="teleop_twist_keyboard" type="teleop_twist_keyboard.py" name="teleop" output="screen">
  <!-- Translate cmd_vel to teleop_cmd-->
    <remap from="/cmd_vel" to="/teleop_cmd"/>
  </node>

  <!--Include package depthimage_to_laserscan which allows us to convert depth images to laser scans 
  These specify the parameters of the depthscan and how/ when we want the image to be taken
  and converted/ analyzed-->
  <node pkg="depthimage_to_laserscan" type="depthimage_to_laserscan" name="d2l" output="screen" required="false">
    <remap from="image"       to="/camera/depth/image_raw"/>
    <remap from="camera_info" to="/camera/depth/camera_info"/>
    <remap from="scan"        to="/scan"/>
    <param name="scan_height" value="10"/>
    <param name="range_min"   value="0.2"/>
    <param name="output_frame_id" value="camera_depth_frame"/>
  </node>

  <!-- Our python file that controls the turtlebots movement-->
  <node pkg="IRProject1" type="reactive_controller.py" name="reactive_controller" output="screen">
    <!-- parameters of our turtlebots movement  -->
    <param name="~forward_speed" value="0.18"/>
    <param name="~turn_speed" value="0.6"/>
    <param name="~avoid_range_m"  value="0.55"/> 
    <param name="~symmetric_eps_m" value="0.05"/>
    <param name="~random_turn_rad" value="0.261799"/> 
    <param name="~escape_spread_rad" value="0.523599"/> 
    <param name="~random_stride_m" value="0.3048"/> 
    <param name="~teleop_timeout" value="0.4"/>
  </node>
</launch>


